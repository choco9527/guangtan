<wxs src="../../tools.wxs" module="tools"/>

<view class="detail-page">
    <van-empty wx:if="{{!detail.aid}}" image="search"/>
    <scroll-view wx:else scroll-y enable-passive>
        <image mode="aspectFill" class="head-img" src="{{detail.pic}}"></image>
        <van-cell-group border>
            <van-cell title="{{detail.title}}" use-label-slot>
                <view slot="label" class="c-label">
                    {{detail.description}}
                </view>
            </van-cell>
            <van-cell title="综合人气" value="{{ tools.getWeight(detail.v_stat) }}"/>

            <van-search shape="round" bind:search="onSearch" bind:change="onSearChange"
                        value="{{ searchVal }}" placeholder="添加地点"/>

            <van-transition show="{{ searchList.length>0 }}" custom-class="block">
                <van-cell-group inset>
                    <van-cell wx:for="{{searchList}}" wx:key="id"
                              title="{{item.title}}" value="{{item.district}}"
                              data-item="{{item}}"
                              bind:tap="onSuggestionSel"
                    />

                </van-cell-group>
            </van-transition>

            <van-cell title="{{searchVal}}" use-label-slot>
                <map slot="label"
                     id="myMap"
                     latitude="{{latitude}}"
                     longitude="{{longitude}}"
                     markers="{{markers}}"
                     covers="{{covers}}"
                     show-location
                ></map>
            </van-cell>
        </van-cell-group>
    </scroll-view>

</view>
